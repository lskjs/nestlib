# ü™∫ Nestlib ‚Äì NestJS Modules & Decorators Monorepo

[![LSK logo](https://badgen.net/badge/icon/MADE%20BY%20LSK?icon=zeit&label&color=red&labelColor=red)](https://github.com/lskjs)
[![NPM version](https://badgen.net/npm/v/@nestlib/access-logger)](https://www.npmjs.com/package/@nestlib/access-logger)
[![NPM downloads](https://badgen.net/npm/dt/@nestlib/access-logger)](https://www.npmjs.com/package/@nestlib/access-logger)
[![Package size](https://badgen.net/github/license/lskjs/nestlib)](https://github.com/lskjs/nestlib/blob/master/LICENSE)
[![Ask us in Telegram](https://img.shields.io/badge/Ask%20us%20in-Telegram-brightblue.svg)](https://t.me/lskjschat)

<div align="center">
  <p><strong>‚ù§Ô∏è‚Äçüî• Comprehensive collection of modules, decorators, and utilities for building powerful NestJS applications ‚ù§Ô∏è‚Äçüî•</strong></p>
</div>

<img src="https://github.com/nestlibs/nestlib/raw/main/docs/logo.png" align="right" width="120" height="120" />

**üöÄ Production Ready**: Battle-tested modules used in production environments  
**üíé TypeScript**: Full TypeScript support with strict type checking  
**‚ö° Fast**: Optimized for performance with minimal overhead  
**üîß Modular**: Use only what you need, tree-shakeable packages  
**üì¶ Well Documented**: Comprehensive documentation and examples  
**üéØ Focused**: Essential functionality without bloat

## üì¶ Packages

| Package | Version | Size | Description |
| ------- | ------- | ---- | ----------- |
| **[@nestlib/access-logger](https://www.npmjs.com/package/@nestlib/access-logger)** | [![npm](https://badgen.net/npm/v/@nestlib/access-logger)](https://www.npmjs.com/package/@nestlib/access-logger) | [![size](https://badgen.net/bundlephobia/minzip/@nestlib/access-logger)](https://bundlephobia.com/result?p=@nestlib/access-logger) | HTTP request logging middleware for NestJS |
| **[@nestlib/auth](https://www.npmjs.com/package/@nestlib/auth)** | [![npm](https://badgen.net/npm/v/@nestlib/auth)](https://www.npmjs.com/package/@nestlib/auth) | [![size](https://badgen.net/bundlephobia/minzip/@nestlib/auth)](https://bundlephobia.com/result?p=@nestlib/auth) | Authentication helpers with OTP support |
| **[@nestlib/cache](https://www.npmjs.com/package/@nestlib/cache)** | [![npm](https://badgen.net/npm/v/@nestlib/cache)](https://www.npmjs.com/package/@nestlib/cache) | [![size](https://badgen.net/bundlephobia/minzip/@nestlib/cache)](https://bundlephobia.com/result?p=@nestlib/cache) | Caching decorators and utilities |
| **[@nestlib/config](https://www.npmjs.com/package/@nestlib/config)** | [![npm](https://badgen.net/npm/v/@nestlib/config)](https://www.npmjs.com/package/@nestlib/config) | [![size](https://badgen.net/bundlephobia/minzip/@nestlib/config)](https://bundlephobia.com/result?p=@nestlib/config) | Configuration management module |
| **[@nestlib/crypto](https://www.npmjs.com/package/@nestlib/crypto)** | [![npm](https://badgen.net/npm/v/@nestlib/crypto)](https://www.npmjs.com/package/@nestlib/crypto) | [![size](https://badgen.net/bundlephobia/minzip/@nestlib/crypto)](https://bundlephobia.com/result?p=@nestlib/crypto) | Cryptographic operations (bcrypt, hashing) |
| **[@nestlib/decorators](https://www.npmjs.com/package/@nestlib/decorators)** | [![npm](https://badgen.net/npm/v/@nestlib/decorators)](https://www.npmjs.com/package/@nestlib/decorators) | [![size](https://badgen.net/bundlephobia/minzip/@nestlib/decorators)](https://bundlephobia.com/result?p=@nestlib/decorators) | Custom parameter decorators and transformers |
| **[@nestlib/interceptors](https://www.npmjs.com/package/@nestlib/interceptors)** | [![npm](https://badgen.net/npm/v/@nestlib/interceptors)](https://www.npmjs.com/package/@nestlib/interceptors) | [![size](https://badgen.net/bundlephobia/minzip/@nestlib/interceptors)](https://bundlephobia.com/result?p=@nestlib/interceptors) | Response and error interceptors |
| **[@nestlib/lsk](https://www.npmjs.com/package/@nestlib/lsk)** | [![npm](https://badgen.net/npm/v/@nestlib/lsk)](https://www.npmjs.com/package/@nestlib/lsk) | [![size](https://badgen.net/bundlephobia/minzip/@nestlib/lsk)](https://bundlephobia.com/result?p=@nestlib/lsk) | LSK module wrapper for NestJS |
| **[@nestlib/mikro-orm](https://www.npmjs.com/package/@nestlib/mikro-orm)** | [![npm](https://badgen.net/npm/v/@nestlib/mikro-orm)](https://www.npmjs.com/package/@nestlib/mikro-orm) | [![size](https://badgen.net/bundlephobia/minzip/@nestlib/mikro-orm)](https://bundlephobia.com/result?p=@nestlib/mikro-orm) | MikroORM logger factory integration |
| **[@nestlib/mutex](https://www.npmjs.com/package/@nestlib/mutex)** | [![npm](https://badgen.net/npm/v/@nestlib/mutex)](https://www.npmjs.com/package/@nestlib/mutex) | [![size](https://badgen.net/bundlephobia/minzip/@nestlib/mutex)](https://bundlephobia.com/result?p=@nestlib/mutex) | Distributed locking and mutex utilities |
| **[@nestlib/notify](https://www.npmjs.com/package/@nestlib/notify)** | [![npm](https://badgen.net/npm/v/@nestlib/notify)](https://www.npmjs.com/package/@nestlib/notify) | [![size](https://badgen.net/bundlephobia/minzip/@nestlib/notify)](https://bundlephobia.com/result?p=@nestlib/notify) | Notification sender (Telegram, Slack, Email) |
| **[@nestlib/rabbitmq](https://www.npmjs.com/package/@nestlib/rabbitmq)** | [![npm](https://badgen.net/npm/v/@nestlib/rabbitmq)](https://www.npmjs.com/package/@nestlib/rabbitmq) | [![size](https://badgen.net/bundlephobia/minzip/@nestlib/rabbitmq)](https://bundlephobia.com/result?p=@nestlib/rabbitmq) | RabbitMQ integration with RPC support |
| **[@nestlib/redis](https://www.npmjs.com/package/@nestlib/redis)** | [![npm](https://badgen.net/npm/v/@nestlib/redis)](https://www.npmjs.com/package/@nestlib/redis) | [![size](https://badgen.net/bundlephobia/minzip/@nestlib/redis)](https://bundlephobia.com/result?p=@nestlib/redis) | Redis client and service wrapper |
| **[@nestlib/upload](https://www.npmjs.com/package/@nestlib/upload)** | [![npm](https://badgen.net/npm/v/@nestlib/upload)](https://www.npmjs.com/package/@nestlib/upload) | [![size](https://badgen.net/bundlephobia/minzip/@nestlib/upload)](https://bundlephobia.com/result?p=@nestlib/upload) | File upload service for AWS S3 |
| **[@nestlib/utils](https://www.npmjs.com/package/@nestlib/utils)** | [![npm](https://badgen.net/npm/v/@nestlib/utils)](https://www.npmjs.com/package/@nestlib/utils) | [![size](https://badgen.net/bundlephobia/minzip/@nestlib/utils)](https://bundlephobia.com/result?p=@nestlib/utils) | Common utilities and helpers |

## üöÄ Quick Start

### Access Logger

```bash
npm install @nestlib/access-logger
```

```typescript
import { Module, NestModule, MiddlewareConsumer } from '@nestjs/common';
import { AccessLoggerMiddleware } from '@nestlib/access-logger';

@Module({})
export class AppModule implements NestModule {
  configure(consumer: MiddlewareConsumer) {
    consumer
      .apply(AccessLoggerMiddleware)
      .forRoutes('*');
  }
}
```

### Auth

```bash
npm install @nestlib/auth
```

```typescript
import { AuthModule } from '@nestlib/auth';

@Module({
  imports: [AuthModule.forRoot({ ... })],
})
export class AppModule {}
```

### Cache

```bash
npm install @nestlib/cache
```

```typescript
import { Cache } from '@nestlib/cache';

@Controller('users')
export class UsersController {
  @Cache({ ttl: 60 })
  @Get(':id')
  async getUser(@Param('id') id: string) {
    return this.usersService.findOne(id);
  }
}
```

### Config

```bash
npm install @nestlib/config
```

```typescript
import { ConfigModule } from '@nestlib/config';

@Module({
  imports: [ConfigModule.forRoot()],
})
export class AppModule {}
```

### Crypto

```bash
npm install @nestlib/crypto
```

```typescript
import { CryptoService } from '@nestlib/crypto';

@Injectable()
export class AuthService {
  constructor(private cryptoService: CryptoService) {}

  async hashPassword(password: string) {
    return this.cryptoService.hash(password);
  }
}
```

### Decorators

```bash
npm install @nestlib/decorators
```

```typescript
import { Query, Data } from '@nestlib/decorators';

@Controller('search')
export class SearchController {
  @Get()
  async search(@Query('q') query: string, @Data() data: any) {
    // ...
  }
}
```

### Interceptors

```bash
npm install @nestlib/interceptors
```

```typescript
import { ResponseInterceptor, ErrorInterceptor } from '@nestlib/interceptors';

@UseInterceptors(ResponseInterceptor, ErrorInterceptor)
@Controller('api')
export class ApiController {}
```

### Redis

```bash
npm install @nestlib/redis
```

```typescript
import { RedisModule } from '@nestlib/redis';

@Module({
  imports: [RedisModule.forRoot({ ... })],
})
export class AppModule {}
```

### RabbitMQ

```bash
npm install @nestlib/rabbitmq
```

```typescript
import { RmqModule } from '@nestlib/rabbitmq';

@Module({
  imports: [RmqModule.forRoot({ ... })],
})
export class AppModule {}
```

## ‚ú® Features

### üîç Access Logger

- **Request ID Generation**: Unique request IDs for tracing
- **Smart Log Levels**: Automatic log level based on status codes and response time
- **Comprehensive Logging**: Method, URL, IP, user agent, status, duration, and more
- **WebSocket Support**: Special handling for WebSocket connections
- **IP Detection**: Automatic client IP extraction from headers

### üîê Auth

- **OTP Support**: One-time password generation and validation
- **Session Management**: Express session integration with MongoDB storage
- **Password Reset**: Complete password reset flow with email support
- **User Models**: Ready-to-use user and OTP models for MikroORM
- **Guards & Decorators**: `@Auth()` decorator and `AuthGuard` for route protection

### üíæ Cache

- **Decorator-based**: `@Cache()` and `@LruCache()` decorators
- **LRU Cache**: In-memory LRU cache support
- **Cache Manager Integration**: Works with NestJS Cache Manager
- **Cache Invalidation**: `@IgnoreCache()` decorator for selective invalidation

### ‚öôÔ∏è Config

- **Environment Variables**: Automatic `.env` file loading
- **Type-safe Configuration**: Full TypeScript support
- **Module Integration**: Seamless NestJS Config module integration
- **Validation**: Configuration validation with error handling

### üîí Crypto

- **Password Hashing**: bcrypt and bcryptjs support
- **Secure Operations**: Cryptographic utilities for hashing and comparison
- **Async Operations**: Promise-based API

### üé® Decorators

- **Parameter Decorators**: `@Query()`, `@Data()`, `@FindParams()`, `@QueryOrBody()`
- **Transformers**: `@Trim()`, `@ToLowerCase()` for data transformation
- **Validation**: Integrated with class-validator

### üõ°Ô∏è Interceptors

- **Response Interceptor**: Standardized API response format
- **Error Interceptor**: Comprehensive error handling and formatting
- **Pretty Errors**: Human-readable error messages in development
- **Request Context**: Request ID and metadata tracking

### üîÑ Mutex

- **Distributed Locking**: Redis-based distributed locks
- **In-memory Locks**: Async lock support for single-instance applications
- **Decorator Support**: `@Lock()` decorator for automatic locking
- **Timeout Handling**: Configurable lock timeouts

### üì¢ Notify

- **Multi-channel**: Telegram, Slack, and Email support
- **Service Integration**: Injectable `NotifyService` for easy use
- **Error Notifications**: Automatic error reporting

### üê∞ RabbitMQ

- **RPC Support**: `@RmqRPC()` decorator for RPC handlers
- **Message Publishing**: Easy message publishing with `RmqService`
- **Error Handling**: Automatic error callbacks and retries
- **Interceptor**: Request/response logging and error handling

### üî¥ Redis

- **Service Wrapper**: Simplified Redis client interface
- **Connection Management**: Automatic connection handling
- **Type Safety**: Full TypeScript support

### üì§ Upload

- **AWS S3 Integration**: Direct S3 upload support
- **Presigned URLs**: Generate presigned URLs for secure uploads
- **File Management**: Upload, delete, and manage files in S3

### üõ†Ô∏è Utils

- **Exception Filter**: `AnyExceptionFilter` for global error handling
- **Validation Pipe**: `AnyValidationPipe` for request validation
- **Logger Factory**: `createNestLogger` for consistent logging
- **Time Decorator**: `@Time()` decorator for performance measurement

## üõ† Development

```bash
# Install dependencies
pnpm install

# Build all packages
pnpm run build

# Run tests
pnpm run test

# Release packages
pnpm run release
```

## ü§ù Contributing

Contributions are welcome! Please feel free to submit a Pull Request.

1. Fork it (<https://github.com/lskjs/nestlib/fork>)
2. Create your feature branch (`git checkout -b features/fooBar`)
3. Commit your changes (`git commit -am 'feat: Add some fooBar'`)
4. Push to the branch (`git push origin feature/fooBar`)
5. Create a new Pull Request

## üìù License

MIT ¬© Igor Suvorov

## üîó Links

* [GitHub Repository](https://github.com/lskjs/nestlib)
* [Issues](https://github.com/lskjs/nestlib/issues)
* [Telegram](https://t.me/lskjschat)

---

**@nestlib** ‚Äì _Comprehensive modules and decorators for NestJS_ üéØ
